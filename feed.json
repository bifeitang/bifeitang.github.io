{
    "version": "https://jsonfeed.org/version/1",
    "title": "Yang's Blog",
    "subtitle": "",
    "icon": "https://bifeitang.github.io/images/favicon.ico",
    "description": "",
    "home_page_url": "https://bifeitang.github.io",
    "items": [
        {
            "id": "https://bifeitang.github.io/2021/08/22/My-Interesting-Projects-at-a-Glance/",
            "url": "https://bifeitang.github.io/2021/08/22/My-Interesting-Projects-at-a-Glance/",
            "title": "My Interesting Projects at a Glance",
            "date_published": "2021-08-22T09:00:26.000Z",
            "content_html": "<h2 id=\"research-project\"><a class=\"anchor\" href=\"#research-project\">#</a> Research Project</h2>\n<ul>\n<li>Exo Skeleton with University of Houston</li>\n<li>Grid Cell personal interest reseach<br />\n<a href=\"/2021/08/22/IntelligenceAndBrainTheories/Grid-Cell-and-Conceptual-Learning/\" title=\"Grid Cell and Conceptual Learning\">Grid Cell and Conceptual Learning</a></li>\n<li>Reinforcement Learning</li>\n<li></li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/22/IntelligenceAndBrainTheories/Grid-Cell-and-Conceptual-Learning/",
            "url": "https://bifeitang.github.io/2021/08/22/IntelligenceAndBrainTheories/Grid-Cell-and-Conceptual-Learning/",
            "title": "Grid Cell and Conceptual Learning",
            "date_published": "2021-08-22T08:40:07.000Z",
            "content_html": "<p>\n\n\t<div class=\"row\">\n    <embed src=\"./Grid_cell_and_conceptual_memory_study.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n</p>\n",
            "tags": [
                "Intelligence and Brain Theories",
                "Grid Cell",
                "Conceptual Learning",
                "Memory",
                "fMRI"
            ]
        },
        {
            "id": "https://bifeitang.github.io/2021/08/22/ReinforcementLearning/Defeat-MITM-attack-with-Reinforcement-Learning/",
            "url": "https://bifeitang.github.io/2021/08/22/ReinforcementLearning/Defeat-MITM-attack-with-Reinforcement-Learning/",
            "title": "Defeat MITM attack with Reinforcement Learning",
            "date_published": "2021-08-22T07:59:39.000Z",
            "content_html": "<p>Add another line</p>\n<h2 id=\"report\"><a class=\"anchor\" href=\"#report\">#</a> Report</h2>\n<p>\n\n\t<div class=\"row\">\n    <embed src=\"./RL_final_report.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n</p>\n<h2 id=\"supplementary\"><a class=\"anchor\" href=\"#supplementary\">#</a> Supplementary</h2>\n<p>\n\n\t<div class=\"row\">\n    <embed src=\"./suppmaterial.pdf\" width=\"100%\" height=\"550\" type=\"application/pdf\">\n\t</div>\n\n\n</p>\n",
            "tags": [
                "Reinforcement Learning",
                "Reinforcement Learning"
            ]
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/StateMachine/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/StateMachine/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.968Z",
            "content_html": "<h2 id=\"freertos-main-controller\"><a class=\"anchor\" href=\"#freertos-main-controller\">#</a> FreeRTOS Main Controller</h2>\n<h3 id=\"design-principles\"><a class=\"anchor\" href=\"#design-principles\">#</a> Design Principles</h3>\n<ul>\n<li>Don't starve the tasks\n<ul>\n<li>Using  <code>vTaskDelay</code>  to block high priority tasks so that the lower priorities ones get chance to execute.</li>\n</ul>\n</li>\n<li>Using global variable is not encouraged in FreeRTOS.  Prefer usage of  <code>static</code>  variable like private in C++.</li>\n<li>Idle Task (keep the counter)</li>\n</ul>\n<h3 id=\"state-machine\"><a class=\"anchor\" href=\"#state-machine\">#</a> State Machine</h3>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">void</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token class-name\">state_func_t</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token class-name\">uint8_t</span> CUR_STATE_ELAPSED_MS <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token class-name\">state_func_t</span> state_func <span class=\"token operator\">=</span> null<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateInit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateWalk</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateStand</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateSit</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateFreeze</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateErr</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Each error with an error code in lookup table, e.g. timeout</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">SetNxtState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">state_func_t</span> func<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token class-name\">state_func_t</span> <span class=\"token function\">GetNxtState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateWalk</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>    <span class=\"token comment\">// 1. set CUR_STATE_ELAPSED_MS by calling xTaskGetTickCount(), check if timeout</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token comment\">// 2. send commands, then SetNxtState(StateStand)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>    <span class=\"token comment\">// 3. or gets interrrupted by emergency, then SetNxtState(StateFreeze)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">SetNxtState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">state_func_t</span> func<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>    <span class=\"token comment\">// 1. set CUR_STATE_ELAPSED_MS = 0</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>    <span class=\"token comment\">// 2. state_func = func</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token class-name\">state_func_t</span> <span class=\"token function\">GetNxtState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre>    <span class=\"token keyword\">return</span> state_func<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">StateMachineTask</span><span class=\"token punctuation\">(</span>xParameter<span class=\"token operator\">*</span> params<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">SetNxtState</span><span class=\"token punctuation\">(</span>StateInit<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre>        <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span><span class=\"token function\">GetNxtState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>        <span class=\"token function\">xTaskDelay</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><h4 id=\"common-practices\"><a class=\"anchor\" href=\"#common-practices\">#</a> Common Practices</h4>\n<ul>\n<li><strong>Using switch statement</strong><br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvNDY2ODUyOTIvc3RhdGUtbWFjaGluZS1wcm9ncmFtLWRlc2lnbi1pbi1mcmVlcnRvcy12dGFza3N0YXJ0c2NoZWR1bGVyLWluLWEtc3dpdGNoLXN0YXRl\">https://stackoverflow.com/questions/46685292/state-machine-program-design-in-freertos-vtaskstartscheduler-in-a-switch-state</span></li>\n<li>Without using switch statement\n<ul>\n<li>Each function only needs to know two things\n<ul>\n<li>What needs to do in this state</li>\n<li>What is next state</li>\n</ul>\n</li>\n<li>Benefits comparing with  <code>switch</code>\n<ul>\n<li>Separate the state transfer form a centralized to distributed functions</li>\n<li>No matter how complex the state transfer is, each</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"test-bench\"><a class=\"anchor\" href=\"#test-bench\">#</a> Test Bench</h3>\n<ul>\n<li>LabWindows/CVI<br />\n<span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubmkuY29tL2VuLXVzL3N1cHBvcnQvZG93bmxvYWRzL3NvZnR3YXJlLXByb2R1Y3RzL2Rvd25sb2FkLmxhYndpbmRvd3MtY3ZpLmh0bWwjMzUzNjAz\">https://www.ni.com/en-us/support/downloads/software-products/download.labwindows-cvi.html#353603</span></li>\n<li></li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Questions/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Questions/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.951Z",
            "content_html": "<h2 id=\"enviornment\"><a class=\"anchor\" href=\"#enviornment\">#</a> Enviornment</h2>\n<blockquote>\n<p><strong>Q1</strong>: How fundimentally the two adds-on are different?</p>\n</blockquote>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214013454316.png\" alt=\"image-20201214013454316\" /></p>\n<ul>\n<li>\n<p>Matlab</p>\n</li>\n<li>\n<p>HalCoGen  <code>v04.07.01</code></p>\n</li>\n<li>\n<p>Code Composer Studio Tool Chain:  <code>C:\\ti\\ccs1011\\ccs\\tools\\compiler\\ti-cgt-arm_5.2.9</code></p>\n</li>\n</ul>\n<blockquote>\n<p><strong>Q2</strong>: How Simulink code gets compiled and linked with tools provided above and then load to the Hercules board?</p>\n</blockquote>\n<h2 id=\"code\"><a class=\"anchor\" href=\"#code\">#</a> Code</h2>\n<blockquote>\n<p><strong>Q3</strong>: Why this  <code>No rule to make target C:/Program, needed by updown.obj</code>  come up every first time open the simulink or switch from CCS to Matlab?</p>\n</blockquote>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214011201751.png\" alt=\"image-20201214011201751\" /></p>\n<blockquote>\n<p><strong>Q4</strong>: Why the code working in CCS but not in Matlab Simulink? What can cause the problem?</p>\n</blockquote>\n<h3 id=\"code-composer-studio\"><a class=\"anchor\" href=\"#code-composer-studio\">#</a> Code Composer Studio</h3>\n<ul>\n<li>Code</li>\n</ul>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214014418829.png\" alt=\"image-20201214014418829\" /></p>\n<ul>\n<li>\n<p>Running in CCS<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214014625695.png\" alt=\"image-20201214014625695\" /></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214014915756.png\" alt=\"image-20201214014915756\" /></p>\n<blockquote>\n<p>I am not using  <code>printf</code>  here sinc I had some issue with configuration of section  <code>.cio</code>  for file  <code>HL_sys_link.cmd</code> , it would  be good if there's any insight.</p>\n</blockquote>\n</li>\n<li>\n<p>Same code running in Simulink</p>\n<ul>\n<li>\n<p>Simulink Model<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214015247520.png\" alt=\"image-20201214015247520\" /></p>\n</li>\n<li>\n<p>Following is what's inside of the code block</p>\n<figure class=\"highlight matlab\"><figcaption data-lang=\"MATLAB\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">function</span> <span class=\"token punctuation\">[</span>canID<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">,</span> nBytes<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">CANread</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>canID <span class=\"token operator\">=</span> <span class=\"token function\">uint32</span><span class=\"token punctuation\">(</span><span class=\"token function\">nan</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>data <span class=\"token operator\">=</span> <span class=\"token function\">uint8</span><span class=\"token punctuation\">(</span><span class=\"token function\">nan</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">8</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>nBytes <span class=\"token operator\">=</span> <span class=\"token function\">uint8</span><span class=\"token punctuation\">(</span><span class=\"token function\">nan</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token function\">strcmp</span><span class=\"token punctuation\">(</span>coder<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">,</span><span class=\"token string\">'rtw'</span><span class=\"token punctuation\">)</span>    </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    coder<span class=\"token punctuation\">.</span><span class=\"token function\">ceval</span><span class=\"token punctuation\">(</span><span class=\"token string\">'HerculesCANRead'</span><span class=\"token punctuation\">,</span>coder<span class=\"token punctuation\">.</span><span class=\"token function\">wref</span><span class=\"token punctuation\">(</span>canID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>coder<span class=\"token punctuation\">.</span><span class=\"token function\">wref</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>coder<span class=\"token punctuation\">.</span><span class=\"token function\">wref</span><span class=\"token punctuation\">(</span>nBytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token function\">fprintf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'canID %u'</span><span class=\"token punctuation\">,</span> canID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">fprintf</span><span class=\"token punctuation\">(</span><span class=\"token string\">'nBytes %u'</span><span class=\"token punctuation\">,</span> nBytes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">end</span></pre></td></tr></table></figure><figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">HerculesCANRead</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">uint32_t</span><span class=\"token operator\">*</span> canID<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> data<span class=\"token punctuation\">,</span> <span class=\"token class-name\">uint8_t</span><span class=\"token operator\">*</span> nBytes<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span> </pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token function\">canInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">canIsRxMessageArrived</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token function\">canGetData</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">,</span> data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token operator\">*</span>canID <span class=\"token operator\">=</span> <span class=\"token function\">canGetID</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token operator\">*</span>nBytes <span class=\"token operator\">=</span> canREG1<span class=\"token operator\">-></span>IF2MCTL <span class=\"token operator\">&amp;</span> <span class=\"token number\">0xFU</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n<p><strong>Note that the CANWrite works with no problem like following.</strong></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201214020304346.png\" alt=\"image-20201214020304346\" /></p>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/MainControllerTasks/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/MainControllerTasks/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.937Z",
            "content_html": "<h2 id=\"main-controller-tasks\"><a class=\"anchor\" href=\"#main-controller-tasks\">#</a> Main Controller Tasks</h2>\n<table>\n<thead>\n<tr>\n<th>Tasks</th>\n<th>Function</th>\n<th>Priority</th>\n<th>Progress</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><strong>IdleTask</strong> (State Machine Task)</td>\n<td>Handle the state machine  transition</td>\n<td>0</td>\n<td>20%</td>\n</tr>\n<tr>\n<td><strong>DbgPrintTask</strong></td>\n<td>Write message to SCI so that logging message will be stored / displayed on UI</td>\n<td>1</td>\n<td>60%</td>\n</tr>\n<tr>\n<td><strong>HeartBeatTask</strong></td>\n<td>Ping each node receiver every 1s</td>\n<td>1</td>\n<td>100%</td>\n</tr>\n<tr>\n<td><strong>CANReceiveTask</strong></td>\n<td>Polling commands from CAN receive message box and quickly copy into circular buffer</td>\n<td>2</td>\n<td>100%</td>\n</tr>\n<tr>\n<td><strong>ExoCmdTask</strong></td>\n<td><mark>Provide following APIs</mark>&lt;br /&gt;-  <strong>EnqueueCmd</strong>: state machine can call this function to send a command&lt;br /&gt;-  <strong>IsCmdReceived</strong> &lt;br /&gt;<mark>with following functions</mark>&lt;br /&gt;- Send command&lt;br /&gt;- Resend command if no echo received before timeout &lt;br /&gt;- Pull message from circular buffer see if there's command echo</td>\n<td>2</td>\n<td>40%</td>\n</tr>\n<tr>\n<td><strong>EmergencyStopTask</strong></td>\n<td>Emergency Handling</td>\n<td>4</td>\n<td>0%</td>\n</tr>\n</tbody>\n</table>\n<h2 id=\"main-controller-ui\"><a class=\"anchor\" href=\"#main-controller-ui\">#</a> Main Controller UI</h2>\n<p>&lt;img src=&quot;C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20210208174357523.png&quot; alt=&quot;image-20210208174357523&quot; style=&quot;zoom:70%;&quot; /&gt;</p>\n<ul>\n<li>Send command to main controller\n<ul>\n<li>More exploration (USB)</li>\n<li>Upload initial configuration to different joint</li>\n</ul>\n</li>\n<li>Listening to COM port\n<ul>\n<li>COM5 e.g.</li>\n<li>save message to computer</li>\n</ul>\n</li>\n<li>State Machine\n<ul>\n<li>Initialization (Power up)\n<ul>\n<li>LED indication on the mode of main controller (Individual test by Lujayna )</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>Next Step</p>\n<ul>\n<li>Send joint max/min range at start up</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/June%206th/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/June%206th/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.921Z",
            "content_html": "<h2 id=\"joint-cant-communicate-with-hercules\"><a class=\"anchor\" href=\"#joint-cant-communicate-with-hercules\">#</a> Joint can't communicate with Hercules</h2>\n<ul class=\"task-list\">\n<li>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>CANbus<span class=\"token punctuation\">.</span><span class=\"token function\">available</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>      CANbus<span class=\"token punctuation\">.</span><span class=\"token function\">read</span><span class=\"token punctuation\">(</span>jointCAN<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>      Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Receive CAN request\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>      Serial<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">char</span><span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>jointCAN<span class=\"token punctuation\">.</span>frame<span class=\"token punctuation\">.</span>buf<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>The  <code>available()</code>  function suppose to indicate receiving of CAN message, but nothing came up</p>\n</li>\n<li>\n<p>CAN bit timing may not good</p>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9lbWJlZGNsb2dpYy5jb20vY2FuLXByb3RvY29sLXByb3RvY29sLXRvLWJyb2FkY2FzdC1tZXNzYWdlLW9uLWEtbmV0d29yay9jYW4tYml0LXRpbWluZy1hbmQtY2FsY3VsYXRpb24v\">https://embedclogic.com/can-protocol-protocol-to-broadcast-message-on-a-network/can-bit-timing-and-calculation/</span></p>\n</li>\n<li>\n<p>Original</p>\n<ul>\n<li>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/** - Setup bit timing </pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    *     - Setup baud rate prescaler extension</pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    *     - Setup TSeg2</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    *     - Setup TSeg1</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    *     - Setup sample jump width</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    *     - Setup baud rate prescaler</pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    canREG1<span class=\"token operator\">-></span>BTR <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token number\">0U</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">16U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>                   <span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">4U</span> <span class=\"token operator\">-</span> <span class=\"token number\">1U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">12U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>                   <span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token number\">3U</span> <span class=\"token operator\">+</span> <span class=\"token number\">4U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">8U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>                   <span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span><span class=\"token number\">4U</span> <span class=\"token operator\">-</span> <span class=\"token number\">1U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;&lt;</span> <span class=\"token number\">6U</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>                   <span class=\"token punctuation\">(</span>uint32<span class=\"token punctuation\">)</span><span class=\"token number\">24U</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n<li>\n<p>Confirmed the bit rate is 250kb/s</p>\n<ul>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210606214742664.png\" alt=\"image-20210606214742664\" /></li>\n</ul>\n</li>\n<li>\n<p>Try change the heart beat frequency from 20ms to 2s</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/* The 20ms value is converted to ticks using the portTICK_PERIOD_MS constant. */</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">mainHEARTBEAT_FREQUENCY_MS</span>         <span class=\"token expression\"><span class=\"token punctuation\">(</span> <span class=\"token number\">2000</span> <span class=\"token operator\">/</span> portTICK_PERIOD_MS <span class=\"token punctuation\">)</span></span></span></pre></td></tr></table></figure></li>\n<li>\n<p>Confirm for Teensy (FlexCAN.cpp)</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#125;</span> <span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">250000</span> <span class=\"token operator\">==</span> baud <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    FLEXCAN0_CTRL1 <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token function\">FLEXCAN_CTRL_PROPSEG</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token function\">FLEXCAN_CTRL_RJW</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>                      <span class=\"token operator\">|</span> <span class=\"token function\">FLEXCAN_CTRL_PSEG1</span><span class=\"token punctuation\">(</span><span class=\"token number\">7</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token function\">FLEXCAN_CTRL_PSEG2</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> <span class=\"token function\">FLEXCAN_CTRL_PRESDIV</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> Issue with CAN transceiver? No</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_1\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_1\"> Issue with Baud rate? No</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> Timing issue? Teensy needs to delay a certain period of time in order to get the corresponding message.</label></p>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/HerculesCanBusCommunication_12-9-2020/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/HerculesCanBusCommunication_12-9-2020/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.913Z",
            "content_html": "<p>According to the instruction <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGkuY29tL2xpdC9hbi9zcG5hMjM3L3NwbmEyMzcucGRmP3RzPTE2MDc0OTcwODA2NzImYW1wO3JlZl91cmw9aHR0cHMlMjUzQSUyNTJGJTI1MkZ3d3cuZ29vZ2xlLmNvbSUyNTJG\">https://www.ti.com/lit/an/spna237/spna237.pdf?ts=1607497080672&amp;ref_url=https%3A%2F%2Fwww.google.com%2F</span></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201209010536090.png\" alt=\"image-20201209010536090\" /></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201209010625937.png\" alt=\"image-20201209010625937\" /></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201209011013043.png\" alt=\"image-20201209011013043\" /></p>\n<table>\n<thead>\n<tr>\n<th>msgBoxArbitVal</th>\n<th>Representation</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Bit 31</td>\n<td>Not used</td>\n</tr>\n<tr>\n<td>Bit 30</td>\n<td>0 - The 11-bit (&quot;standard&quot;) identifier is used for this message object.&lt;br/&gt;1 - The 29-bit (&quot;extended&quot;) identifier is used for this message object.</td>\n</tr>\n<tr>\n<td>Bit 29</td>\n<td>0 - Direction = Receive&lt;br /&gt;1 - Direction = Transmit</td>\n</tr>\n<tr>\n<td>Bit 28:0</td>\n<td>Message ID</td>\n</tr>\n</tbody>\n</table>\n<p>E.g.</p>\n<ul class=\"task-list\">\n<li>\n<p>ID = 123, Direction = transmit, + 1 &gt;&gt; 29, 0 &gt;&gt;</p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> Write a function to convert the ID to the msgArbitVal</label></p>\n</li>\n</ul>\n<pre><code class=\"language-C\">#include &quot;HL_can.h&quot;\n#include &quot;HL_system.h&quot;\n\n#include &quot;HL_sys_common.h&quot;\n\n#define D_SIZE 12\n\nuint32 getMsgBoxArbitVal(uint32 msgID, bool isTransmit, bool isExtended);\n\nuint8 tx_data[D_SIZE] = &#123;1, 1, 2, 0, 2, 0, 2, 0, 'E', 'X', 'O', '\\0'&#125;;\n\n\nint main(void)\n&#123;\n    canInit();\n    uint32 newMsgBoxVal = getMsgBoxArbitVal(128, 1, 1);\n    canUpdateID(canREG1, canMESSAGE_BOX1, newMsgBoxVal);\n    canTransmit(canREG1, canMESSAGE_BOX1, tx_data);\n\n    return 0;\n&#125;\n\nuint32 getMsgBoxArbitVal(uint32 msgID, bool isTransmit, bool isExtended)\n&#123;\n    uint32 direction = isTransmit ? (1 &lt;&lt; 29) : 0;\n    uint32 extended = isExtended ? (1 &lt;&lt; 30) : 0;\n    return (uint32) msgID | direction | extended;\n&#125;\n\n\nvoid canMessageNotification(canBASE_t *node, uint32 messageBox)\n&#123;\n    return;\n&#125;\n\nvoid canErrorNotification(canBASE_t *node, uint32 notification)\n&#123;\n    return;\n&#125;\n\nvoid canStatusChangeNotification(canBASE_t *node, uint32 notification)\n&#123;\n    return;\n&#125;\n\n</code></pre>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_May_9th_2021/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_May_9th_2021/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.902Z",
            "content_html": "<h2 id=\"may-9th\"><a class=\"anchor\" href=\"#may-9th\">#</a> May 9th</h2>\n<h4 id=\"cant-compile-exojoint\"><a class=\"anchor\" href=\"#cant-compile-exojoint\">#</a> Can't compile  <code>exoJoint</code></h4>\n<ul>\n<li>\n<p>Can't find  <code>sourceID</code>  and  <code>targetID</code> <img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210509183446878.png\" alt=\"image-20210509183446878\" /></p>\n<ul>\n<li>â€‹\t<strong>Solution</strong>\n<ul>\n<li>Added to  <code>ExoCAN</code>  class<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210509183558145.png\" alt=\"image-20210509183558145\" /></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p>Can't find  <code>encodeMsgID</code> <br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210509183756498.png\" alt=\"image-20210509183756498\" /></p>\n<ul>\n<li>Solution: comment that line out</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"cant-run-pyqt-ui-linuxwindowsmac\"><a class=\"anchor\" href=\"#cant-run-pyqt-ui-linuxwindowsmac\">#</a> Can't run PyQt (UI, Linux/Windows/Mac)</h4>\n<ul>\n<li><code>canGUI</code>  folder does not contain any file which import  <code>PyQt4</code>\n<ul>\n<li>Send command to main controller\n<ul>\n<li>API exposed to PyQt UI to accept any outside command</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"able-to-get-angle-recording\"><a class=\"anchor\" href=\"#able-to-get-angle-recording\">#</a> Able to get angle recording</h2>\n<ul>\n<li>\n<p>Teensy</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CDesktop%5CAngleRecord.gif\" alt=\"AngleRecord\" /></p>\n</li>\n<li>\n<p>Try write to CAN bus with error, stops at waiting for CAN msg request<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210509234646787.png\" alt=\"image-20210509234646787\" /></p>\n</li>\n<li>\n<p>Send angle information via CAN bus</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CDesktop%5CAngleCANRecorder.gif\" alt=\"AngleCANRecorder\" /></p>\n</li>\n<li>\n<p>Hercules basic test with value receiver</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CDesktop%5CAngleMainControllerCommunication.gif\" alt=\"AngleMainControllerCommunication\" /></p>\n</li>\n<li>\n<p>Uplink works: teensy -&gt; main controller (Task)</p>\n</li>\n<li>\n<p>Teensy</p>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_12-5-2020/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_12-5-2020/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.894Z",
            "content_html": "<h4 id=\"to-figure-out\"><a class=\"anchor\" href=\"#to-figure-out\">#</a> To figure out</h4>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> Why it doesn't work previously</label></p>\n<ul>\n<li>Only Digital Read and write through pin GIOB_4 and GIOB_6 is supported<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201205162257701.png\" alt=\"image-20201205162257701\" /></li>\n<li>For CAN communication, it's not enough<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201205162523032.png\" alt=\"image-20201205162523032\" /></li>\n<li><mark>Wonder how to generate similar block for CAN bus</mark></li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> How builder/launcher/etc methods work</label></p>\n<p>USB -&gt; Emulation &amp; Serial port for communication with Simulink<br />\nBuilder using builder, specify the toolchain</p>\n<ul>\n<li>Connectivity configuration</li>\n</ul>\n<p>In order to make the Simulink communicate with target, need to read/write with rtiostream.</p>\n</li>\n</ul>\n<h3 id=\"pre-requisite\"><a class=\"anchor\" href=\"#pre-requisite\">#</a> Pre-Requisite</h3>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> Cortex-R4F MCUs<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201205150154490.png\" alt=\"image-20201205150154490\" /></label></li>\n</ul>\n<h2 id=\"changes\"><a class=\"anchor\" href=\"#changes\">#</a> Changes</h2>\n<h3 id=\"builder\"><a class=\"anchor\" href=\"#builder\">#</a> Builder</h3>\n<h4 id=\"compare-ti_hercules_rm57lx_toolchainm-and-herculescandebugmakefile-makefile-first-part-of-the-builder\"><a class=\"anchor\" href=\"#compare-ti_hercules_rm57lx_toolchainm-and-herculescandebugmakefile-makefile-first-part-of-the-builder\">#</a> Compare  <code>TI_HERCULES_RM57Lx_toolchain.m</code>  and  <code>HerculesCan\\Debug\\makefile</code>  ( <code>makefile</code> , first part of the builder)</h4>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> Linker</label></p>\n<figure class=\"highlight makefile\"><figcaption data-lang=\"makefile\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># Makefile</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token symbol\">HerculusCan.out</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>OBJS<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>CMD_SRCS<span class=\"token punctuation\">)</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>GEN_CMDS<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token operator\">@</span>echo <span class=\"token string\">'Building target: \"$@\"'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token operator\">@</span>echo <span class=\"token string\">'Invoking: ARM Linker'</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token string\">\"C:/ti/ccs1011/ccs/tools/compiler/ti-cgt-arm_20.2.1.LTS/bin/armcl\"</span> -mv7R5 --code_state<span class=\"token operator\">=</span>32 --float_support<span class=\"token operator\">=</span>VFPv3D16 -me -g --diag_warning<span class=\"token operator\">=</span>225 --diag_wrap<span class=\"token operator\">=</span>off --display_error_number --enum_type<span class=\"token operator\">=</span>packed --abi<span class=\"token operator\">=</span>eabi -z -m<span class=\"token string\">\"HerculusCan.map\"</span> --heap_size<span class=\"token operator\">=</span>0x800 --stack_size<span class=\"token operator\">=</span>0x800 -i<span class=\"token string\">\"C:/ti/ccs1011/ccs/tools/compiler/ti-cgt-arm_20.2.1.LTS/lib\"</span> -i<span class=\"token string\">\"C:/ti/ccs1011/ccs/tools/compiler/ti-cgt-arm_20.2.1.LTS/include\"</span> --reread_libs --diag_wrap<span class=\"token operator\">=</span>off --display_error_number --warn_sections --xml_link_info<span class=\"token operator\">=</span><span class=\"token string\">\"HerculusCan_linkInfo.xml\"</span> --rom_model -o <span class=\"token string\">\"HerculusCan.out\"</span> <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span>ORDERED_OBJS<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token operator\">@</span>echo <span class=\"token string\">'Finished building target: \"$@\"'</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token operator\">@</span>echo <span class=\"token string\">' '</span></pre></td></tr></table></figure><figure class=\"highlight matlab\"><figcaption data-lang=\"MATLAB\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>linkerOpts <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'-z '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>\t<span class=\"token string\">'-m\"TI_HerculesPilSerial.map\" '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>\t<span class=\"token string\">'-i\"$(TI_LIB)\" '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>\t<span class=\"token string\">'-i\"$(TI_INCLUDE)\" '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>\t<span class=\"token string\">'--reread_libs '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>\t<span class=\"token string\">'--warn_sections '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>\t<span class=\"token string\">'--display_error_number '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>\t<span class=\"token string\">'--diag_wrap=off '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>\t<span class=\"token string\">'--rom_model '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>\t<span class=\"token string\">'--stack=0 '</span> <span class=\"token punctuation\">...</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>\t<span class=\"token string\">'\"$(TARGET_SOURCE)\\halcogen\\source\\sys_link.cmd\"'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_4\">  <code>-mv7R4</code>  to  <code>-mv7R5</code> </label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" disabled=\"true\" /><label for=\"cbx_5\">  <code>ProjectName.map</code>  change the project name</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_6\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_6\">  <code>linker.Libraries = &#123; '&quot;$(TI_LIB)\\rtsv7R4_T_le_v3D16_eabi.lib&quot;' &#125;;</code> , confirmed the .lib exists in the  <code>ti-cgt-arm-20.2.1.LTS/lib</code> .</label></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"change-targetapplicationframework-second-part-of-the-builder\"><a class=\"anchor\" href=\"#change-targetapplicationframework-second-part-of-the-builder\">#</a> Change  <code>TargetApplicationFramework</code>  (second part of the builder)</h4>\n<p>Main thing is adding HalCoGen sources  <code>addHalCoGenSources</code>  and  <code>addRTIOStreamSources</code> . The  <code>TargetApplicationFramework</code>  provides code to initialize the target before running the main function. It provides code like set the clock frequency, wait states, interrupts, etc. Also, set up the C runtime environment, which HalCoGen will generate.</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_7\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_7\"> Replace files and folders under  <code>halcogen</code>  with the latest configuration generated from HalCoGen, make sure the SCI2 is configured. Following is the reason for using SCI2.</label></p>\n<blockquote>\n<p>Before the board is shipped, the XDS100V2 port1 is configured as JTAG, and port2 is configured as SCI. The CPLD on the board is also programmed to route the JTAG signals to the MCU.</p>\n</blockquote>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_8\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_8\"> Update project main function to include correct header. e.g.  <code>gio.h</code>  to  <code>HL_gio.h</code> </label></p>\n</li>\n</ul>\n<h3 id=\"launcher\"><a class=\"anchor\" href=\"#launcher\">#</a> Launcher</h3>\n<p>Look at  <code>Launcher.m</code> , it uses  <code>loadti</code>  which comes with Code Composer as a debug server scripting.</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_9\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_9\"> Change  <code>tconf</code> , make it point to new  <code>RM57L8xx.ccxml</code> . This file can be got from Code Composer  <code>targetConfigs</code> .<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201205232557405.png\" alt=\"image-20201205232557405\" /></label></p>\n<p>One can test the usability of this file by launch and try connect the the target.</p>\n</li>\n</ul>\n<h3 id=\"communicator\"><a class=\"anchor\" href=\"#communicator\">#</a> Communicator</h3>\n<p>Mathworks provide  <code>libmwrtiostreamserial.dll</code>  on host side. On the target side, it got the  <code>RTIOStream</code>  implemented in the sources folder.</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_10\" disabled=\"true\" /><label for=\"cbx_10\"> Platform-in-the-loop, Matlab generate binary file =&gt; USB to the board.<br />\nBinary file, stl, open command and run the bin file</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_11\" disabled=\"true\" /><label for=\"cbx_11\"> Embedded version, digital write and read</label></li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_11-30-2020/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_11-30-2020/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.888Z",
            "content_html": "<h2 id=\"can-communication-between-teensy-and-hercules\"><a class=\"anchor\" href=\"#can-communication-between-teensy-and-hercules\">#</a> CAN communication between Teensy and Hercules</h2>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb3BwZXJoaWxsdGVjaC5jb20vYmxvZy9jb250cm9sbGVyLWFyZWEtbmV0d29yay1jYW4tcHJvdG90eXBpbmctd2l0aC10ZWVuc3ktMzEzMi8=\">CAN Prototyping with Teensy 3.1/3.2</span></p>\n<ul>\n<li>In case of working with the CAN port, you will need a CAN transceiver in order to connect the board to a real CAN bus network. The best choice for adding a CAN transceiver, in terms of size and electrical compatibility, is the <span class=\"exturl\" data-url=\"aHR0cDovL2NvcHBlcmhpbGx0ZWNoLmNvbS9jYW4tYnVzLW1pbmktYnJlYWtvdXQtYm9hcmQv\">CAN Bus Mini Breakout Board</span> we offer through this website.</li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114174628529.png\" alt=\"image-20201114174628529\" /></li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114174729789.png\" alt=\"image-20201114174729789\" /></li>\n</ul>\n</li>\n<li>\n<p>Teensy:</p>\n</li>\n<li>\n<p>Able to read data from Teensy Can bus</p>\n<ul>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114182837644.png\" alt=\"image-20201114182837644\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114183009690.png\" alt=\"image-20201114183009690\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114184659352.png\" alt=\"image-20201114184659352\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>Connect Hercules to the CAN bus</p>\n<ul>\n<li>\n<p>Install <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGkuY29tL3Rvb2wvSEFMQ09HRU4=\">HalCoGen</span></p>\n</li>\n<li>\n<p>Install Code Composer Studio</p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115005749530.png\" alt=\"image-20201115005749530\" /></p>\n</li>\n<li>\n<p>Configure DCAN_TX, DCAN_RX</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115233805328.png\" alt=\"image-20201115233805328\" /></p>\n</li>\n<li>\n<p>Follow the tutorial and write code</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Figure out the DCAN1 Pin</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGkuY29tL2xpdC9kZi9zcHJyMzk3L3NwcnIzOTcucGRmP3RzPTE2MDU0OTYyNzEwODc=\">https://www.ti.com/lit/df/sprr397/sprr397.pdf?ts=1605496271087</span></li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115234025988.png\" alt=\"image-20201115234025988\" />\n<ul>\n<li>I was thinking maybe the pin is multiplexed to here</li>\n<li>But wasn't able to find corresponding CAN1</li>\n</ul>\n</li>\n<li>So looks like J10 44/45 are the pin I should use. And I have solder pin connecter to it.<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115235233243.png\" alt=\"image-20201115235233243\" /></li>\n</ul>\n</li>\n<li>\n<p>Set up CAN TX</p>\n<ul>\n<li>\n<p>Code Modified in  <code>HL_sys_man.c</code></p>\n</li>\n<li>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (0) */</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_can.h\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_system.h\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">/* Include Files */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_sys_common.h\"</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (1) */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">/** @fn void main(void)</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>*   @brief Application main function</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>*   @note This function is empty by default.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>*</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>*   This function is called after startup.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>*   The user can use this function to implement the application.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>*/</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (2) */</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_can.h\"</span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_system.h\"</span></span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>uint8 tx_data<span class=\"token punctuation\">[</span>D_SIZE<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'\\0'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>uint32 <span class=\"token function\">checkPackets</span><span class=\"token punctuation\">(</span>uint8 <span class=\"token operator\">*</span>src_pkg<span class=\"token punctuation\">,</span> uint8 <span class=\"token operator\">*</span>dst_pkg<span class=\"token punctuation\">,</span> uint32 psize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"28\"></td><td><pre></pre></td></tr><tr><td data-num=\"29\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"30\"></td><td><pre></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (3) */</span></pre></td></tr><tr><td data-num=\"34\"></td><td><pre></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">canInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre>    <span class=\"token function\">canTransmit</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX1<span class=\"token punctuation\">,</span> tx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"37\"></td><td><pre></pre></td></tr><tr><td data-num=\"38\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"39\"></td><td><pre></pre></td></tr><tr><td data-num=\"40\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre></pre></td></tr><tr><td data-num=\"44\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (4) */</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre>uint32 <span class=\"token function\">checkPackages</span><span class=\"token punctuation\">(</span>uint8 <span class=\"token operator\">*</span>src_pkg<span class=\"token punctuation\">,</span> uint8 <span class=\"token operator\">*</span>dst_pkg<span class=\"token punctuation\">,</span> uint32 psize<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    uint32 err <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre>    uint32 cnt <span class=\"token operator\">=</span> psize<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"49\"></td><td><pre></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>cnt<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>src_pkg<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>dst_pkg<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>            err<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre>    <span class=\"token keyword\">return</span> err<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canMessageNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 messageBox<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"65\"></td><td><pre></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canErrorNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 notification<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"70\"></td><td><pre></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canStatusChangeNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 notification<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"75\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr></table></figure></li>\n</ul>\n<pre><code>  \n- ![image-20201120224019913](C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20201120224019913.png)\n\n- ![image-20201120224129579](C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20201120224129579.png)\n\n- ![image-20201120224157852](C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20201120224157852.png)\n\n</code></pre>\n</li>\n<li>\n<p>Set up CAN RX</p>\n<ul>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234019661.png\" alt=\"image-20201120234019661\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234038976.png\" alt=\"image-20201120234038976\" /></p>\n</li>\n<li>\n<p>Code</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">canIsRxMessageArrived</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">canGetData</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sciSend</span><span class=\"token punctuation\">(</span>sciREG1<span class=\"token punctuation\">,</span> D_SIZE<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>uint32 i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> D_SIZE<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pos[%u] received data [%u]\\n\"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>Both</p>\n<pre><code class=\"language-C\">int main(void)\n&#123;\n    canInit();\n    sciInit();\n\n    while(1)\n    &#123;\n        tx_data[0]++;\n        canTransmit(canREG1, canMESSAGE_BOX1, tx_data);\n\n        while(!canIsRxMessageArrived(canREG1, canMESSAGE_BOX2));\n        canGetData(canREG1, canMESSAGE_BOX2, rx_data);\n\n        sciSend(sciREG1, D_SIZE, rx_data);\n        uint32 i;\n\n        for(i = 0; i &lt; D_SIZE; ++i)\n        &#123;\n            printf(&quot;Pos[%u] received data [%u]\\n&quot;, i, rx_data[i]);\n        &#125;\n    &#125;\n\n    return 0;\n&#125;\n</code></pre>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234921668.png\" alt=\"image-20201120234921668\" /></p>\n</li>\n<li>\n<p>Set up the test coverage and add a unit test badge</p>\n</li>\n<li>\n<p>Next Steps</p>\n<ul>\n<li>Communicate</li>\n<li>State machine for joints</li>\n<li>Matlab Simulink real-times\n<ul>\n<li>Receive and send out the message</li>\n<li>Focus on the can receive</li>\n<li>CAN_Not_available</li>\n</ul>\n</li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201121111506761.png\" alt=\"image-20201121111506761\" /></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"use-matlab-simulink-with-hercules-rm57x\"><a class=\"anchor\" href=\"#use-matlab-simulink-with-hercules-rm57x\">#</a> Use MATLAB Simulink with Hercules RM57x</h2>\n<h3 id=\"set-up\"><a class=\"anchor\" href=\"#set-up\">#</a> Set Up</h3>\n<ul>\n<li>\n<p><strong>Pre-requisite</strong></p>\n<ul>\n<li></li>\n</ul>\n</li>\n<li>\n<p>Install Cortex-R adds-on<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128150811124.png\" alt=\"image-20201128150811124\" /></p>\n<ul>\n<li>\n<p>The package toolchain may be outdated, the latest code composer version is v10, but only v5 and v6 are present.<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128151129927.png\" alt=\"image-20201128151129927\" /></p>\n</li>\n<li>\n<p>Make sure the version matches<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128151213973.png\" alt=\"image-20201128151213973\" /></p>\n</li>\n<li>\n<p>Looks like ccsv6 has different file structure comparing with ccsv10. So installed ccsv6.</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128152234251.png\" alt=\"image-20201128152234251\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161503273.png\" alt=\"image-20201128161503273\" /></p>\n<p>This works<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161532729.png\" alt=\"image-20201128161532729\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161816355.png\" alt=\"image-20201128161816355\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161825513.png\" alt=\"image-20201128161825513\" /></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161857315.png\" alt=\"image-20201128161857315\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161914373.png\" alt=\"image-20201128161914373\" /></p>\n</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h3 id=\"run-demo-code\"><a class=\"anchor\" href=\"#run-demo-code\">#</a> Run Demo Code</h3>\n<ul>\n<li>Remember to switch the directory</li>\n</ul>\n<p>&lt;img src=&quot;C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20201128174747736.png&quot; alt=&quot;image-20201128174747736&quot; style=&quot;zoom:100%;&quot; /&gt;</p>\n<ul>\n<li>\n<p>Change the directory from <em><strong>C:\\Program Files\\Polyspace\\R2020a\\bin</strong></em> to your own drive<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128175033477.png\" alt=\"image-20201128175033477\" /></p>\n</li>\n<li>\n<p>Second bug is I used  <code>&amp;</code>  in my folder name which confused the compiler.</p>\n</li>\n<li>\n<p>Eventually I am able to deploy and build<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128183655265.png\" alt=\"image-20201128183655265\" /></p>\n<p>But there's no command window pop up as stated in the example</p>\n<blockquote>\n<p>After the model launches on the hardware, a command window opens and shows that the executable is running on in the TI Hercules RM57Lx LaunchPad Development Kit. To stop the model running on the TI Hercules RM57Lx LaunchPad Development Kit, close the command window.</p>\n</blockquote>\n<p>I suspect it's due to the warning</p>\n<blockquote>\n<p>All blocks in block diagram '<span class=\"exturl\" data-url=\"bWF0bGFiOm9wZW5fc3lzdGVt\">arm_cortex_r_gettingstarted</span>' are either virtual or have been removed by block reduction optimization or they are inactive variants, therefore there is nothing to simulate. Note, for code generation, block reduction optimization removes all diagram branches terminating in sink blocks that do not participate in code generation. For example, To Workspace blocks and potentially their sources are removed when the <span class=\"exturl\" data-url=\"bWF0bGFiOmNvbmZpZ3NldC5pbnRlcm5hbC5vcGVuKCdhcm1fY29ydGV4X3JfZ2V0dGluZ3N0YXJ0ZWQnLCdNYXRGaWxlTG9nZ2luZycpOw==\">MAT-file logging</span> is off.</p>\n<p>Component:Simulink | Category:Block diagram warning</p>\n</blockquote>\n<ul>\n<li><strong>Can't connect to hardware board</strong><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201129140320119.png\" alt=\"image-20201129140320119\" />\n<ul>\n<li>Followed the question here <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2Fuc3dlcnMvNjIyMzczLWVtYmVkZGVkLWNvZGVyLWZvci1hcm0tY29ydGV4LXItcHJvY2Vzc29ycy1oZXJjdWxlcy10bXM1NzBsYzQzeA==\">https://www.mathworks.com/matlabcentral/answers/622373-embedded-coder-for-arm-cortex-r-processors-hercules-tms570lc43x</span></li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"check-list\"><a class=\"anchor\" href=\"#check-list\">#</a> Check List</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> Be able to compile and upload code to the Teensy</label></p>\n<ul>\n<li>Clean, blink LED test</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oYW5nb3V0cy5nb29nbGUuY29tL18vZWxVaS9jaGF0LXJlZGlyZWN0P2F1dGh1c2VyPTEmYW1wO2Rlc3Q9aHR0cHMlM0ElMkYlMkZ3d3cuYXJkdWluby5jYyUyRmVuJTJGVHV0b3JpYWwlMkZCdWlsdEluRXhhbXBsZXMlMkZCbGluaw==\">https://www.arduino.cc/en/Tutorial/BuiltInExamples/Blink</span></li>\n<li>#define LED 13</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> Luu will send the CAN send/receive code</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> CAN Analyzer, microchip</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> After the communication between Tessny-&gt; Hercules Data</label></p>\n<ul>\n<li>\n<p>Logging</p>\n</li>\n<li>\n<p>Timestamp, sampling rate, every signgle frame</p>\n</li>\n<li>\n<p>Will log the data into as Restful API call, Json format</p>\n<ul>\n<li>200 Hz, every frame, log into the Json file 0.005</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_11-15-2020/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_11-15-2020/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.869Z",
            "content_html": "<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> Ask about UH software</label></li>\n</ul>\n<h2 id=\"can-communication-between-teensy-and-hercules\"><a class=\"anchor\" href=\"#can-communication-between-teensy-and-hercules\">#</a> CAN communication between Teensy and Hercules</h2>\n<ul>\n<li>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly9jb3BwZXJoaWxsdGVjaC5jb20vYmxvZy9jb250cm9sbGVyLWFyZWEtbmV0d29yay1jYW4tcHJvdG90eXBpbmctd2l0aC10ZWVuc3ktMzEzMi8=\">CAN Prototyping with Teensy 3.1/3.2</span></p>\n<ul>\n<li>In case of working with the CAN port, you will need a CAN transceiver in order to connect the board to a real CAN bus network. The best choice for adding a CAN transceiver, in terms of size and electrical compatibility, is the <span class=\"exturl\" data-url=\"aHR0cDovL2NvcHBlcmhpbGx0ZWNoLmNvbS9jYW4tYnVzLW1pbmktYnJlYWtvdXQtYm9hcmQv\">CAN Bus Mini Breakout Board</span> we offer through this website.</li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114174628529.png\" alt=\"image-20201114174628529\" /></li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114174729789.png\" alt=\"image-20201114174729789\" /></li>\n</ul>\n</li>\n<li>\n<p>Teensy:</p>\n</li>\n<li>\n<p>Able to read data from Teensy Can bus</p>\n<ul>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114182837644.png\" alt=\"image-20201114182837644\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114183009690.png\" alt=\"image-20201114183009690\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201114184659352.png\" alt=\"image-20201114184659352\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>Connect Hercules to the CAN bus</p>\n<ul>\n<li>\n<p>Install <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGkuY29tL3Rvb2wvSEFMQ09HRU4=\">HalCoGen</span></p>\n</li>\n<li>\n<p>Install Code Composer Studio</p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115005749530.png\" alt=\"image-20201115005749530\" /></p>\n</li>\n<li>\n<p>Configure DCAN_TX, DCAN_RX</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115233805328.png\" alt=\"image-20201115233805328\" /></p>\n</li>\n<li>\n<p>Follow the tutorial and write code</p>\n</li>\n</ul>\n</li>\n<li>\n<p>Figure out the DCAN1 Pin</p>\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cudGkuY29tL2xpdC9kZi9zcHJyMzk3L3NwcnIzOTcucGRmP3RzPTE2MDU0OTYyNzEwODc=\">https://www.ti.com/lit/df/sprr397/sprr397.pdf?ts=1605496271087</span></li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115234025988.png\" alt=\"image-20201115234025988\" />\n<ul>\n<li>I was thinking maybe the pin is multiplexed to here</li>\n<li>But wasn't able to find corresponding CAN1</li>\n</ul>\n</li>\n<li>So looks like J10 44/45 are the pin I should use. And I have solder pin connecter to it.<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201115235233243.png\" alt=\"image-20201115235233243\" /></li>\n</ul>\n</li>\n<li>\n<p>Set up CAN TX</p>\n<ul>\n<li>\n<p>Code Modified in  <code>HL_sys_man.c</code></p>\n</li>\n<li>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (0) */</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_can.h\"</span></span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_system.h\"</span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token comment\">/* Include Files */</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"HL_sys_common.h\"</span></span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (1) */</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token comment\">/** @fn void main(void)</pre></td></tr><tr><td data-num=\"14\"></td><td><pre>*   @brief Application main function</pre></td></tr><tr><td data-num=\"15\"></td><td><pre>*   @note This function is empty by default.</pre></td></tr><tr><td data-num=\"16\"></td><td><pre>*</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>*   This function is called after startup.</pre></td></tr><tr><td data-num=\"18\"></td><td><pre>*   The user can use this function to implement the application.</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>*/</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (2) */</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">D_SIZE</span> <span class=\"token expression\"><span class=\"token number\">12</span></span></span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>uint8 tx_data<span class=\"token punctuation\">[</span>D_SIZE<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'E'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'X'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'O'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'\\0'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>uint32 <span class=\"token function\">checkPackets</span><span class=\"token punctuation\">(</span>uint8 <span class=\"token operator\">*</span>src_pkg<span class=\"token punctuation\">,</span> uint8 <span class=\"token operator\">*</span>dst_pkg<span class=\"token punctuation\">,</span> uint32 psize<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre></pre></td></tr><tr><td data-num=\"28\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"29\"></td><td><pre></pre></td></tr><tr><td data-num=\"30\"></td><td><pre><span class=\"token keyword\">int</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"31\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"32\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (3) */</span></pre></td></tr><tr><td data-num=\"33\"></td><td><pre></pre></td></tr><tr><td data-num=\"34\"></td><td><pre>    <span class=\"token function\">canInit</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"35\"></td><td><pre>    <span class=\"token function\">canTransmit</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX1<span class=\"token punctuation\">,</span> tx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"36\"></td><td><pre></pre></td></tr><tr><td data-num=\"37\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr><tr><td data-num=\"38\"></td><td><pre></pre></td></tr><tr><td data-num=\"39\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"40\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"41\"></td><td><pre></pre></td></tr><tr><td data-num=\"42\"></td><td><pre></pre></td></tr><tr><td data-num=\"43\"></td><td><pre><span class=\"token comment\">/* USER CODE BEGIN (4) */</span></pre></td></tr><tr><td data-num=\"44\"></td><td><pre>uint32 <span class=\"token function\">checkPackages</span><span class=\"token punctuation\">(</span>uint8 <span class=\"token operator\">*</span>src_pkg<span class=\"token punctuation\">,</span> uint8 <span class=\"token operator\">*</span>dst_pkg<span class=\"token punctuation\">,</span> uint32 psize<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"45\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"46\"></td><td><pre>    uint32 err <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"47\"></td><td><pre>    uint32 cnt <span class=\"token operator\">=</span> psize<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"48\"></td><td><pre></pre></td></tr><tr><td data-num=\"49\"></td><td><pre>    <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>cnt<span class=\"token operator\">--</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"50\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"51\"></td><td><pre>        <span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>src_pkg<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">!=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>dst_pkg<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"52\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"53\"></td><td><pre>            err<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"54\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"55\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"56\"></td><td><pre>    <span class=\"token keyword\">return</span> err<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"57\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"58\"></td><td><pre></pre></td></tr><tr><td data-num=\"59\"></td><td><pre></pre></td></tr><tr><td data-num=\"60\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canMessageNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 messageBox<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"61\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"62\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"63\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"64\"></td><td><pre></pre></td></tr><tr><td data-num=\"65\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canErrorNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 notification<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"66\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"67\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"68\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"69\"></td><td><pre></pre></td></tr><tr><td data-num=\"70\"></td><td><pre><span class=\"token keyword\">void</span> <span class=\"token function\">canStatusChangeNotification</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">canBASE_t</span> <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> uint32 notification<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"71\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"72\"></td><td><pre>    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"73\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"74\"></td><td><pre><span class=\"token comment\">/* USER CODE END */</span></pre></td></tr></table></figure></li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120224019913.png\" alt=\"image-20201120224019913\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120224129579.png\" alt=\"image-20201120224129579\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120224157852.png\" alt=\"image-20201120224157852\" /></p>\n</li>\n</ul>\n</li>\n<li>\n<p>Set up CAN RX</p>\n<ul>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234019661.png\" alt=\"image-20201120234019661\" /></p>\n</li>\n<li>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234038976.png\" alt=\"image-20201120234038976\" /></p>\n</li>\n<li>\n<p>Code</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token function\">canIsRxMessageArrived</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token function\">canGetData</span><span class=\"token punctuation\">(</span>canREG1<span class=\"token punctuation\">,</span> canMESSAGE_BOX2<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token function\">sciSend</span><span class=\"token punctuation\">(</span>sciREG1<span class=\"token punctuation\">,</span> D_SIZE<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>uint32 i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> D_SIZE<span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Pos[%u] received data [%u]\\n\"</span><span class=\"token punctuation\">,</span> i<span class=\"token punctuation\">,</span> rx_data<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>\n<p>Both</p>\n<pre><code class=\"language-C\">int main(void)\n&#123;\n    canInit();\n    sciInit();\n\n    while(1)\n    &#123;\n        tx_data[0]++;\n        canTransmit(canREG1, canMESSAGE_BOX1, tx_data);\n\n        while(!canIsRxMessageArrived(canREG1, canMESSAGE_BOX2));\n        canGetData(canREG1, canMESSAGE_BOX2, rx_data);\n\n        sciSend(sciREG1, D_SIZE, rx_data);\n        uint32 i;\n\n        for(i = 0; i &lt; D_SIZE; ++i)\n        &#123;\n            printf(&quot;Pos[%u] received data [%u]\\n&quot;, i, rx_data[i]);\n        &#125;\n    &#125;\n\n    return 0;\n&#125;\n</code></pre>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201120234921668.png\" alt=\"image-20201120234921668\" /></p>\n</li>\n<li>\n<p>Set up the test coverage and add a unit test badge</p>\n</li>\n<li>\n<p>Next Steps</p>\n<ul>\n<li>Communicate</li>\n<li>State machine for joints</li>\n<li>Matlab Simulink real-times\n<ul>\n<li>Receive and send out the message</li>\n<li>Focus on the can receive</li>\n<li>CAN_Not_available</li>\n</ul>\n</li>\n<li><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201121111506761.png\" alt=\"image-20201121111506761\" /></li>\n</ul>\n</li>\n<li></li>\n</ul>\n<h2 id=\"use-matlab-simulink-with-hercules-rm57x\"><a class=\"anchor\" href=\"#use-matlab-simulink-with-hercules-rm57x\">#</a> Use MATLAB Simulink with Hercules RM57x</h2>\n<h3 id=\"set-up\"><a class=\"anchor\" href=\"#set-up\">#</a> Set Up</h3>\n<ul>\n<li>\n<p><strong>Pre-requisite</strong></p>\n<ul>\n<li>MATLAB Embedded Cortex-R</li>\n<li>Code composer with specific version of code generation tools compiler installed</li>\n</ul>\n</li>\n<li>\n<p>Install Cortex-R adds-on<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128150811124.png\" alt=\"image-20201128150811124\" /></p>\n<ul>\n<li>\n<p>The package toolchain may be outdated, the latest code composer version is v10, but only v5 and v6 are present.<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128151129927.png\" alt=\"image-20201128151129927\" /></p>\n</li>\n<li>\n<p>Make sure the version matches<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128151213973.png\" alt=\"image-20201128151213973\" /></p>\n</li>\n<li>\n<p>Looks like ccsv6 has different file structure comparing with ccsv10. So installed ccsv6.</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128152234251.png\" alt=\"image-20201128152234251\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161503273.png\" alt=\"image-20201128161503273\" /></p>\n<p>This works<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161532729.png\" alt=\"image-20201128161532729\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161816355.png\" alt=\"image-20201128161816355\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161825513.png\" alt=\"image-20201128161825513\" /></p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161857315.png\" alt=\"image-20201128161857315\" /><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128161914373.png\" alt=\"image-20201128161914373\" /></p>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"run-demo-code\"><a class=\"anchor\" href=\"#run-demo-code\">#</a> Run Demo Code</h3>\n<ul>\n<li>Remember to switch the directory</li>\n</ul>\n<p>&lt;img src=&quot;C:\\Users\\kydn8\\AppData\\Roaming\\Typora\\typora-user-images\\image-20201128174747736.png&quot; alt=&quot;image-20201128174747736&quot; style=&quot;zoom:100%;&quot; /&gt;</p>\n<ul>\n<li>\n<p>Change the directory from <em><strong>C:\\Program Files\\Polyspace\\R2020a\\bin</strong></em> to your own drive<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128175033477.png\" alt=\"image-20201128175033477\" /></p>\n</li>\n<li>\n<p>Second bug is I used  <code>&amp;</code>  in my folder name which confused the compiler.</p>\n</li>\n<li>\n<p>Eventually I am able to deploy and build<br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201128183655265.png\" alt=\"image-20201128183655265\" /></p>\n<p>But there's no command window pop up as stated in the example</p>\n<blockquote>\n<p>After the model launches on the hardware, a command window opens and shows that the executable is running on in the TI Hercules RM57Lx LaunchPad Development Kit. To stop the model running on the TI Hercules RM57Lx LaunchPad Development Kit, close the command window.</p>\n</blockquote>\n<p>I suspect it's due to the warning</p>\n<blockquote>\n<p>All blocks in block diagram '<span class=\"exturl\" data-url=\"bWF0bGFiOm9wZW5fc3lzdGVt\">arm_cortex_r_gettingstarted</span>' are either virtual or have been removed by block reduction optimization or they are inactive variants, therefore there is nothing to simulate. Note, for code generation, block reduction optimization removes all diagram branches terminating in sink blocks that do not participate in code generation. For example, To Workspace blocks and potentially their sources are removed when the <span class=\"exturl\" data-url=\"bWF0bGFiOmNvbmZpZ3NldC5pbnRlcm5hbC5vcGVuKCdhcm1fY29ydGV4X3JfZ2V0dGluZ3N0YXJ0ZWQnLCdNYXRGaWxlTG9nZ2luZycpOw==\">MAT-file logging</span> is off.</p>\n<p>Component:Simulink | Category:Block diagram warning</p>\n</blockquote>\n<ul>\n<li><strong>Can't connect to hardware board</strong><br />\n<img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20201129140320119.png\" alt=\"image-20201129140320119\" />\n<ul>\n<li>Followed the question here <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cubWF0aHdvcmtzLmNvbS9tYXRsYWJjZW50cmFsL2Fuc3dlcnMvNjIyMzczLWVtYmVkZGVkLWNvZGVyLWZvci1hcm0tY29ydGV4LXItcHJvY2Vzc29ycy1oZXJjdWxlcy10bXM1NzBsYzQzeA==\">https://www.mathworks.com/matlabcentral/answers/622373-embedded-coder-for-arm-cortex-r-processors-hercules-tms570lc43x</span></li>\n</ul>\n</li>\n<li></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"check-list\"><a class=\"anchor\" href=\"#check-list\">#</a> Check List</h2>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> Be able to compile and upload code to the Teensy</label></p>\n<ul>\n<li>Clean, blink LED test</li>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly9oYW5nb3V0cy5nb29nbGUuY29tL18vZWxVaS9jaGF0LXJlZGlyZWN0P2F1dGh1c2VyPTEmYW1wO2Rlc3Q9aHR0cHMlM0ElMkYlMkZ3d3cuYXJkdWluby5jYyUyRmVuJTJGVHV0b3JpYWwlMkZCdWlsdEluRXhhbXBsZXMlMkZCbGluaw==\">https://www.arduino.cc/en/Tutorial/BuiltInExamples/Blink</span></li>\n<li>#define LED 13</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> Luu will send the CAN send/receive code</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> CAN Analyzer, microchip</label></p>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> After the communication between Tessny-&gt; Hercules Data</label></p>\n<ul>\n<li>\n<p>Logging</p>\n</li>\n<li>\n<p>Timestamp, sampling rate, every signgle frame</p>\n</li>\n<li>\n<p>Will log the data into as Restful API call, Json format</p>\n<ul>\n<li>200 Hz, every frame, log into the Json file 0.005</li>\n</ul>\n</li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_5\" disabled=\"true\" /><label for=\"cbx_5\"> nikunj bhagat</label></p>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_7-23-2021/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_7-23-2021/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.860Z",
            "content_html": "<h2 id=\"heartbeat-from-hercules-to-teensy\"><a class=\"anchor\" href=\"#heartbeat-from-hercules-to-teensy\">#</a> Heartbeat from Hercules to Teensy</h2>\n<ul>\n<li>\n<p>Heartbeat Task design</p>\n<ul>\n<li>Hercules -&gt; Teensy: send heartbeat to all teensy nodes every 200ms</li>\n<li>Teensy corresponding node reply with it's current angle</li>\n</ul>\n</li>\n<li>\n<p>Major code from Hercules</p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">static</span> <span class=\"token keyword\">void</span> <span class=\"token function\">HeartBeatTask</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>pvParameters<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    TickType_t xNextWakeTime<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    xNextWakeTime <span class=\"token operator\">=</span> <span class=\"token function\">xTaskGetTickCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span> <span class=\"token punctuation\">;</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token function\">vTaskDelayUntil</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">&amp;</span>xNextWakeTime<span class=\"token punctuation\">,</span> mainHEARTBEAT_FREQUENCY_MS <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>        <span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>        <span class=\"token keyword\">for</span><span class=\"token punctuation\">(</span>i <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;=</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">;</span> <span class=\"token operator\">++</span>i<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>            <span class=\"token class-name\">uint32_t</span> canID <span class=\"token operator\">=</span> i<span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>            <span class=\"token keyword\">char</span> data <span class=\"token operator\">=</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>            <span class=\"token function\">HerculesCANWrite</span><span class=\"token punctuation\">(</span>canID<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>data<span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token function\">DbgPrint</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Send HeartBeat Message from CAN bus\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure></li>\n<li>\n<p>Major code from Teensy</p>\n<pre><code class=\"language-c++\">if (CANbus.available()) &#123;\n        CANbus.read(rxCANmsg);\n        if (rxCANmsg.id == 2 &amp;&amp; rxCANmsg.buf[0] == '1')\n        &#123;\n          Serial.println((String) &quot;Receive Hear Beat CAN message&quot;);\n          Serial.println((String) &quot;Reply with Joint Angle&quot; + jointCAN.frame.buf[0] + &quot;-&quot; + jointCAN.frame.buf[1]);\n          CANbus.write(jointCAN.frame);\n        &#125;\n    &#125;\n\n</code></pre>\n</li>\n<li>\n<p>Screenshot</p>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20210723010627617.png\" alt=\"image-20210723010627617\" /></p>\n</li>\n<li>\n<p>Please find gif from attachment</p>\n</li>\n</ul>\n<p><img data-src=\"C:%5CUsers%5Ckydn8%5CDesktop%5CHerculesHearBeatResponseSingleNode.gif\" alt=\"HerculesHearBeatResponseSingleNode\" /></p>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_03-13-2021/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_03-13-2021/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.847Z",
            "content_html": "<h2 id=\"hercules_migrate_update_03-13-2021\"><a class=\"anchor\" href=\"#hercules_migrate_update_03-13-2021\">#</a> Hercules_Migrate_Update_03-13-2021</h2>\n<h4 id=\"task-creation-in-another-task\"><a class=\"anchor\" href=\"#task-creation-in-another-task\">#</a> Task creation in another task</h4>\n<ul>\n<li>it is perfectly ok to create tasks from inside other tasks.</li>\n<li>Any call to  <code>xTaskCreate()</code>  will allocate a TCB structure and stack for that task. No matter where the task gets created (from  a  function or another task), they will be in the separated memory. Say  <code>TaskX</code>  is created, without deleting  <code>TaskX</code> ,  <code>TaskY</code>  is also created. Then two tasks won't use the same memory because both calls to  <code>xTaskCreate()</code>  will allocate separated RAM.</li>\n</ul>\n<h4 id=\"passing-parameters-to-task\"><a class=\"anchor\" href=\"#passing-parameters-to-task\">#</a> Passing Parameters to Task</h4>\n<ul>\n<li>Ref\n<ul>\n<li><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuaGFja3N0ZXIuaW8vTmlrZXQvdGFza3MtcGFyYW1ldGVydG90YXNrcy1mcmVlcnRvcy10dXRvcmlhbC01LWI4YTdiNw==\">https://www.hackster.io/Niket/tasks-parametertotasks-freertos-tutorial-5-b8a7b7</span></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"taskdelayuntil\"><a class=\"anchor\" href=\"#taskdelayuntil\">#</a> TaskDelayUntil</h4>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\">/* The rate at which data is sent to the queue.  The 200ms value is converted</pre></td></tr><tr><td data-num=\"2\"></td><td><pre>to ticks using the portTICK_PERIOD_MS constant. */</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">define</span> <span class=\"token macro-name\">mainQUEUE_SEND_FREQUENCY_MS</span>\t\t\t<span class=\"token expression\"><span class=\"token punctuation\">(</span> <span class=\"token number\">200</span> <span class=\"token operator\">/</span> portTICK_PERIOD_MS <span class=\"token punctuation\">)</span></span></span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>xNextWakeTime <span class=\"token operator\">=</span> <span class=\"token function\">xTaskGetTickCount</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token comment\">/* Place this task in the blocked state until it is time to run again. The block time is specified in ticks, the constant used converts ticks to ms.  While in the Blocked state this task will not consume any CPU time. */</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token function\">vTaskDelayUntil</span><span class=\"token punctuation\">(</span> <span class=\"token operator\">&amp;</span>xNextWakeTime<span class=\"token punctuation\">,</span> mainQUEUE_SEND_FREQUENCY_MS <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></pre></td></tr></table></figure><h4 id=\"freertos-task-name\"><a class=\"anchor\" href=\"#freertos-task-name\">#</a> FreeRTOS Task Name</h4>\n<p>1</p>\n<p>I'm a newbie of FreeRTOS. But I don't think it's well documented. As in <span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuZnJlZXJ0b3Mub3JnL2EwMDEyNS5odG1s\">xTaskCreate()</span> :</p>\n<blockquote>\n<p><code>pcName</code>  A descriptive name for the task. This is mainly used to facilitate debugging, but can also be used to obtain a task handle. The maximum length of a taskâ€™s name is set using the  <code>configMAX_TASK_NAME_LEN</code>  parameter in  <code>FreeRTOSConfig.h</code> .</p>\n</blockquote>\n<ol>\n<li>Is a task must be associated with a name?\n<ul>\n<li>No it does not need a name</li>\n</ul>\n</li>\n<li>What happened if  <code>pcName</code>  is NULL?\n<ul>\n<li>If  <code>pcName</code>  is  <code>NULL</code>  it simply does not have a name. Nothing happens.</li>\n</ul>\n</li>\n<li>What happened if I created multiple tasks with the same name?\n<ul>\n<li>You will get several tasks with the same name so you cannot identify them by name. The behavior of  <code>xTaskGetHandle</code>  is then undefined (as per the documentation).</li>\n</ul>\n</li>\n<li>Should I maintain the mapping between task's handle and name? Or FreeRTOS maintains this relation?\n<ul>\n<li>FreeRTOS handles this.</li>\n</ul>\n</li>\n</ol>\n<p>To Do</p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_0\" disabled=\"true\" /><label for=\"cbx_0\"> Make debug message take parameter, use vector convention</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\"> Write a circular buffer to record the mapping information between hashcode and command sending state</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> Explore other simpler data structure since our commands to won't be too much</label>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> Command we send are usually in sequence, FIFO</label></li>\n</ul>\n</li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\"> Read emergency, we can start a highest priority task, to handle all the emergency</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_5\" disabled=\"true\" /><label for=\"cbx_5\"> Put all the priority define into one dedicated file</label></li>\n<li>[ ]</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_02-28-2020/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Hercules_Migrate_Update_02-28-2020/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.817Z",
            "content_html": "<h2 id=\"review-state-machine-event-driven-programming\"><a class=\"anchor\" href=\"#review-state-machine-event-driven-programming\">#</a> Review State Machine Event Driven Programming</h2>\n<p><span class=\"exturl\" data-url=\"aHR0cHM6Ly93d3cuc3RhdGUtbWFjaGluZS5jb20vZXZlbnQtZHJpdmVuLXByb2dyYW1taW5nLw==\">https://www.state-machine.com/event-driven-programming/</span></p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_0\" checked=\"true\" disabled=\"true\" /><label for=\"cbx_0\"> Object oriented flavor with  <code>wnd</code>  object</label></p>\n<figure class=\"highlight c\"><figcaption data-lang=\"c\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>wnd<span class=\"token punctuation\">.</span>cbSize <span class=\"token operator\">=</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>wnd<span class=\"token punctuation\">)</span></pre></td></tr></table></figure></li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_1\" disabled=\"true\" /><label for=\"cbx_1\">  <code>EventLoop</code> , with message loop and message pump</label></p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_2\" disabled=\"true\" /><label for=\"cbx_2\"> 1. use a special  <code>object</code>  to record all the events potentially interesting to an application, this object is only used for communication and can be conveniently stored in the event queue, and later retrieved for processing. Can provide  <code>asynchronous</code>  processing</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_3\" disabled=\"true\" /><label for=\"cbx_3\"> 2.  <code>DispatchMessage</code>  must complete and return to the event-loop before the loop goes to the next event. (Event processing proceeds in Run-to-Completion (RTC)). Realize  <code>inversion of control</code>  for the event driven.</label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_4\" disabled=\"true\" /><label for=\"cbx_4\">  <code>GetMessage</code>  unblock, take the message from the queue, place it to the object</label></li>\n</ul>\n</li>\n<li class=\"task-list-item\">\n<p><input type=\"checkbox\" id=\"cbx_5\" disabled=\"true\" /><label for=\"cbx_5\">  <code>Event-driven</code>  programming should be separated from  <code>sequential</code>  programming</label></p>\n<ul class=\"task-list\">\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_6\" disabled=\"true\" /><label for=\"cbx_6\"> E.g. instead of using  <code>sleep</code> , use  <code>SetTimer()</code> </label></li>\n<li class=\"task-list-item\"><input type=\"checkbox\" id=\"cbx_7\" disabled=\"true\" /><label for=\"cbx_7\"> This is a perfect way to delegate a command to sleep and wake up later</label></li>\n</ul>\n</li>\n</ul>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Untitled/",
            "url": "https://bifeitang.github.io/2021/08/15/ExoSkeleton/Untitled/",
            "title": "",
            "date_published": "2021-08-16T03:19:05.688Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/15/hello-world/",
            "url": "https://bifeitang.github.io/2021/08/15/hello-world/",
            "title": "Hello World",
            "date_published": "2021-08-15T15:34:39.485Z",
            "content_html": "<p>Welcome to <a href=\"https://hexo.io/\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/server.html\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\">Deployment</a></p>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/14/Notes-list/",
            "url": "https://bifeitang.github.io/2021/08/14/Notes-list/",
            "title": "Notes list",
            "date_published": "2021-08-15T00:36:17.000Z",
            "content_html": "",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2021/08/01/Don-t-need-to-be-amazing-to-start/",
            "url": "https://bifeitang.github.io/2021/08/01/Don-t-need-to-be-amazing-to-start/",
            "title": "Don't need to be amazing to start",
            "date_published": "2021-08-02T02:26:04.000Z",
            "content_html": "<p>It's 2 am now, but I am staying up late again. This time, it's about a book I am reading before going to bed.</p>\n<p>Quote &quot;Don't be afraid of the edge, or not enough knowledge, put your own not enough, naive true embodiment, it will be lovely, don't pretend. The same goes for the application topic. It must be peculiar. If I can see that you have genuine feelings about the topic, I will be more able to understand why you want to do this topic, will have confidence in you, and trust you to do it.&quot;</p>\n<p>I have been long anxious about not being fully prepared for my Ph.D. application. Even I started one year ago.</p>\n<p>I never seriously consider having a Ph.D. until I start working. It teaches me two working styles. A group of my colleagues are passionate and keep coming up with new methods, following the state of art technologies by reading many papers and reaching out to the most knowledgeable people in the field. They even actively push the management to allow them more resources for innovation. Another group focuses on getting the job done elegantly and efficiently with clear-defined requirements and starting their chill time in style.</p>\n<p>Top performers in each group shine in their way.  However, I am deeply attracted to the first type, which emphasizes more on the work itself. In other words, I hope I love the job itself more than the meaning of the job because the purpose of the job changes over time, but if the job itself keeps revealing the fancy of the world, it will be a whole different story.</p>\n<p>However, which job is the one I love? I think it's a tricky question for most people, including myself. I enjoy coding, but coding is just a tool. It's what I build with this tool that genuinely matters. So I started trial and error to find my preferred domain. I started with blockchain and did an internship building distributed apps. But it didn't take me long to realize that what interested me was the utopian vision that the blockchain was building. I then tried security by having classes and participating in CTF competitions. But the reality tells me that I lack talent. I am confident to be experienced and proficient in this field, but it's hard to be at the top. And I may love hacking merely because it sounds cool. Then I had an opportunity to work with the operating system. But I turned it down since it's something I am good at but not passionate about. The ongoing trial and error can be frustrating and exhausting, but I have also learned the importance of balancing ideals and reality more profoundly.</p>\n<p>Hard work pays off for a willing heart. I'm still glad I clicked on Coursera's Computational Neural Science class one boring night. That night I had just been intrigued by Elon Musk's pie-in-the-sky talk on Joe Rogan's podcast about a new &quot;Neuralink&quot; product to announce, which claims to make everyone a superhuman. Being skeptical, I started to search around to understand what on earth Neuralink is doing. But the more I learn, the more I am amazed at the wonders of this field. How is it possible that it took human beings thousands of years to learn electronic circuits, but these principles have surprisingly long been part of our bodies supporting our daily physiological activities? Nature already equates each nerve impulse with resistance, capacitance, and inductance. At that moment, I felt loved since each of us is so exquisitely constructed.</p>\n<p>Come to think of it, brain-computer interface, cyborg, cyberpunk has always been my favorite topic (check my list). Is it time for us humans to mirror the imagination of science fiction into reality? I thought it was still far from me in 2019 when I first heard Elon Musk emphasized the urgency of increasing the input/output bandwidth for human-computer communication by using BCI.</p>\n<p>To verify if I am genuinely interested in this area and if my skill set could support my interest, I started finding research opportunities and connecting with different people in the field. Luckily, I got a volunteer position at the University of Houston to work on exoskeleton BCI. In the meantime, I started to take online courses, read books, and visit forums. Moreover, I would find related papers for exciting topics, contact the writer, and get my hands dirty to reproduce their results.</p>\n<p>Through a whole year of accumulation, I am keen to use this blog to share the fun and excitement that BCI has brought me. Although it may take more than half a century to get sci-fi imaginations into reality, I find the challenges themselves fascinating. Understanding how exactly our brain works, what intelligence is, how we can communicate with the mind. It sounds like something I can work on for the rest of my life.</p>\n",
            "tags": []
        },
        {
            "id": "https://bifeitang.github.io/2020/10/25/first-post/",
            "url": "https://bifeitang.github.io/2020/10/25/first-post/",
            "title": "Eureka",
            "date_published": "2020-10-25T07:37:30.000Z",
            "content_html": "<p>Kinds of hard to believe I start posting again after my blog has been dormented for so long.</p>\n<p>The motivation comes from figuring out what really interest me â€“ brain study.</p>\n",
            "tags": []
        }
    ]
}